<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Menu - Studio Alfa</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        button { padding: 8px 16px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-info { background: #17a2b8; color: white; }
        .btn-warning { background: #ffc107; color: #212529; }
        input, select { padding: 8px; margin: 5px; border: 1px solid #ddd; border-radius: 4px; }
        .form-group { margin: 10px 0; }
        label { display: inline-block; width: 150px; }
        .logo-preview { max-width: 100px; max-height: 100px; border: 1px solid #ddd; border-radius: 8px; margin: 10px 0; }
        .file-input { display: none; }
        .file-label { display: inline-block; padding: 8px 16px; background: #6c757d; color: white; border-radius: 4px; cursor: pointer; }
        .file-label:hover { background: #5a6268; }
        .status-indicator { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-right: 8px; }
        .status-online { background: #28a745; }
        .status-offline { background: #dc3545; }
        .status-pending { background: #ffc107; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Teste Menu - Studio Alfa</h1>
    
    <div class="test-section">
        <h2>ğŸ¨ Trocar Logo</h2>
        <p>Testa a funcionalidade de trocar o logo da aplicaÃ§Ã£o</p>
        
        <div class="form-group">
            <label>Logo Atual:</label>
            <img id="logoAtual" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjMjRiOWE4Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+U1RVRElPPC90ZXh0Pgo8dGV4dCB4PSI1MCIgeT0iODAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkFMVkE8L3RleHQ+Cjwvc3ZnPgo=" alt="Logo padrÃ£o" class="logo-preview">
        </div>
        
        <input type="file" id="logoInput" accept="image/*" class="file-input">
        <label for="logoInput" class="file-label">ğŸ“ Escolher Nova Imagem</label>
        
        <button class="btn-primary" onclick="testarTrocarLogo()">ğŸ”„ Trocar Logo</button>
        <button class="btn-info" onclick="testarRestaurarLogo()">ğŸ”„ Restaurar Logo</button>
        
        <div id="resultadoLogo"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“¥ Importar Banco SQLite</h2>
        <p>Testa a funcionalidade de importar banco de dados</p>
        
        <div class="form-group">
            <label>Arquivo SQLite:</label>
            <input type="file" id="dbImport" accept=".sqlite,.db,application/octet-stream">
        </div>
        
        <button class="btn-primary" onclick="testarImportarBanco()">ğŸ“¥ Importar Banco</button>
        <button class="btn-info" onclick="simularImportacao()">ğŸ§ª Simular ImportaÃ§Ã£o</button>
        
        <div id="resultadoImport"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“¤ Exportar Banco SQLite</h2>
        <p>Testa a funcionalidade de exportar banco de dados</p>
        
        <div class="form-group">
            <label>Nome do arquivo:</label>
            <input type="text" id="nomeExport" value="studio-alfa-backup" placeholder="Nome do arquivo">
        </div>
        
        <button class="btn-success" onclick="testarExportarBanco()">ğŸ“¤ Exportar Banco</button>
        <button class="btn-info" onclick="simularExportacao()">ğŸ§ª Simular ExportaÃ§Ã£o</button>
        
        <div id="resultadoExport"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“± Instalar App (PWA)</h2>
        <p>Testa a funcionalidade de instalaÃ§Ã£o PWA</p>
        
        <div class="form-group">
            <label>Status PWA:</label>
            <span class="status-indicator" id="pwaStatus"></span>
            <span id="pwaStatusText">Verificando...</span>
        </div>
        
        <div class="form-group">
            <label>Prompt de instalaÃ§Ã£o:</label>
            <span id="promptStatus">NÃ£o disponÃ­vel</span>
        </div>
        
        <button class="btn-primary" id="btnInstall" onclick="testarInstalacao()" disabled>ğŸ“± Instalar App</button>
        <button class="btn-info" onclick="verificarPWA()">ğŸ” Verificar PWA</button>
        
        <div id="resultadoPWA"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸŒ“ Temas (Claro/Escuro)</h2>
        <p>Testa a funcionalidade de trocar temas</p>
        
        <div class="form-group">
            <label>Tema Atual:</label>
            <select id="themeSelect">
                <option value="light">Claro</option>
                <option value="dark">Escuro</option>
            </select>
        </div>
        
        <button class="btn-primary" onclick="testarTema()">ğŸ¨ Aplicar Tema</button>
        <button class="btn-info" onclick="alternarTema()">ğŸ”„ Alternar Tema</button>
        <button class="btn-warning" onclick="verificarTema()">ğŸ” Verificar Tema</button>
        
        <div id="resultadoTema"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ’¾ Backup e PersistÃªncia</h2>
        <p>Testa funcionalidades de backup e persistÃªncia</p>
        
        <div class="form-group">
            <label>Status do banco:</label>
            <span class="status-indicator" id="dbStatus"></span>
            <span id="dbStatusText">Verificando...</span>
        </div>
        
        <button class="btn-success" onclick="testarBackup()">ğŸ’¾ ForÃ§ar Backup</button>
        <button class="btn-info" onclick="verificarPersistencia()">ğŸ” Verificar PersistÃªncia</button>
        <button class="btn-warning" onclick="limparCache()">ğŸ—‘ï¸ Limpar Cache</button>
        
        <div id="resultadoBackup"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š Status Geral dos Testes</h2>
        <div id="statusGeral"></div>
    </div>

    <script>
        let deferredPrompt = null;
        let logoOriginal = null;
        let temaAtual = 'light';
        
        function mostrarResultado(elemento, mensagem, tipo = 'info') {
            const div = document.getElementById(elemento);
            div.innerHTML = `<div class="test-result ${tipo}">${mensagem}</div>`;
        }
        
        function atualizarStatusGeral() {
            const div = document.getElementById('statusGeral');
            const status = {
                logo: logoOriginal ? 'Alterado' : 'PadrÃ£o',
                pwa: document.getElementById('btnInstall').disabled ? 'NÃ£o disponÃ­vel' : 'DisponÃ­vel',
                tema: temaAtual,
                banco: 'Simulado'
            };
            
            div.innerHTML = `
                <div class="test-result info">
                    <strong>Status Geral:</strong><br>
                    ğŸ¨ Logo: ${status.logo}<br>
                    ğŸ“± PWA: ${status.pwa}<br>
                    ğŸŒ“ Tema: ${status.tema}<br>
                    ğŸ’¾ Banco: ${status.banco}
                </div>
            `;
        }
        
        // Teste de Logo
        function testarTrocarLogo() {
            const input = document.getElementById('logoInput');
            if (input.files.length === 0) {
                mostrarResultado('resultadoLogo', 'âŒ Selecione uma imagem primeiro!', 'error');
                return;
            }
            
            const file = input.files[0];
            if (!file.type.startsWith('image/')) {
                mostrarResultado('resultadoLogo', 'âŒ Arquivo deve ser uma imagem!', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                if (!logoOriginal) {
                    logoOriginal = document.getElementById('logoAtual').src;
                }
                
                document.getElementById('logoAtual').src = e.target.result;
                mostrarResultado('resultadoLogo', 'âœ… Logo alterado com sucesso!', 'success');
                atualizarStatusGeral();
            };
            reader.readAsDataURL(file);
        }
        
        function testarRestaurarLogo() {
            if (logoOriginal) {
                document.getElementById('logoAtual').src = logoOriginal;
                logoOriginal = null;
                mostrarResultado('resultadoLogo', 'âœ… Logo restaurado para o padrÃ£o!', 'success');
                atualizarStatusGeral();
            } else {
                mostrarResultado('resultadoLogo', 'â„¹ï¸ Logo jÃ¡ estÃ¡ no padrÃ£o', 'info');
            }
        }
        
        // Teste de ImportaÃ§Ã£o
        function testarImportarBanco() {
            const input = document.getElementById('dbImport');
            if (input.files.length === 0) {
                mostrarResultado('resultadoImport', 'âŒ Selecione um arquivo primeiro!', 'error');
                return;
            }
            
            const file = input.files[0];
            if (!file.name.endsWith('.sqlite') && !file.name.endsWith('.db')) {
                mostrarResultado('resultadoImport', 'âŒ Arquivo deve ser .sqlite ou .db!', 'error');
                return;
            }
            
            mostrarResultado('resultadoImport', `âœ… Arquivo selecionado: ${file.name} (${(file.size/1024).toFixed(2)} KB)`, 'success');
        }
        
        function simularImportacao() {
            mostrarResultado('resultadoImport', 'ğŸ§ª Simulando importaÃ§Ã£o...', 'info');
            setTimeout(() => {
                mostrarResultado('resultadoImport', 'âœ… ImportaÃ§Ã£o simulada com sucesso!', 'success');
            }, 2000);
        }
        
        // Teste de ExportaÃ§Ã£o
        function testarExportarBanco() {
            const nome = document.getElementById('nomeExport').value.trim();
            if (!nome) {
                mostrarResultado('resultadoExport', 'âŒ Digite um nome para o arquivo!', 'error');
                return;
            }
            
            // Simular download
            const blob = new Blob(['Dados simulados do banco'], {type: 'application/octet-stream'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${nome}.sqlite`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            mostrarResultado('resultadoExport', `âœ… Arquivo ${nome}.sqlite exportado!`, 'success');
        }
        
        function simularExportacao() {
            mostrarResultado('resultadoExport', 'ğŸ§ª Simulando exportaÃ§Ã£o...', 'info');
            setTimeout(() => {
                mostrarResultado('resultadoExport', 'âœ… ExportaÃ§Ã£o simulada com sucesso!', 'success');
            }, 1500);
        }
        
        // Teste de PWA
        function testarInstalacao() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        mostrarResultado('resultadoPWA', 'âœ… App instalado com sucesso!', 'success');
                    } else {
                        mostrarResultado('resultadoPWA', 'âŒ InstalaÃ§Ã£o cancelada pelo usuÃ¡rio', 'warning');
                    }
                    deferredPrompt = null;
                    document.getElementById('btnInstall').disabled = true;
                    verificarPWA();
                });
            } else {
                mostrarResultado('resultadoPWA', 'âŒ Prompt de instalaÃ§Ã£o nÃ£o disponÃ­vel', 'error');
            }
        }
        
        function verificarPWA() {
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches;
            const isInstalled = window.navigator.standalone || isStandalone;
            
            const statusEl = document.getElementById('pwaStatus');
            const statusTextEl = document.getElementById('pwaStatusText');
            
            if (isInstalled) {
                statusEl.className = 'status-indicator status-online';
                statusTextEl.textContent = 'Instalado';
                mostrarResultado('resultadoPWA', 'âœ… App PWA estÃ¡ instalado!', 'success');
            } else {
                statusEl.className = 'status-indicator status-offline';
                statusTextEl.textContent = 'NÃ£o instalado';
                mostrarResultado('resultadoPWA', 'â„¹ï¸ App PWA nÃ£o estÃ¡ instalado', 'info');
            }
            
            // Simular prompt de instalaÃ§Ã£o
            if (!deferredPrompt) {
                setTimeout(() => {
                    deferredPrompt = { prompt: () => {}, userChoice: Promise.resolve({outcome: 'accepted'}) };
                    document.getElementById('btnInstall').disabled = false;
                    document.getElementById('promptStatus').textContent = 'DisponÃ­vel';
                    verificarPWA();
                }, 3000);
            }
        }
        
        // Teste de Temas
        function testarTema() {
            const tema = document.getElementById('themeSelect').value;
            temaAtual = tema;
            
            if (tema === 'dark') {
                document.body.style.backgroundColor = '#0f172a';
                document.body.style.color = '#e5e7eb';
            } else {
                document.body.style.backgroundColor = '#ffffff';
                document.body.style.color = '#0f172a';
            }
            
            mostrarResultado('resultadoTema', `âœ… Tema ${tema === 'dark' ? 'escuro' : 'claro'} aplicado!`, 'success');
            atualizarStatusGeral();
        }
        
        function alternarTema() {
            const novoTema = temaAtual === 'light' ? 'dark' : 'light';
            document.getElementById('themeSelect').value = novoTema;
            testarTema();
        }
        
        function verificarTema() {
            mostrarResultado('resultadoTema', `â„¹ï¸ Tema atual: ${temaAtual === 'dark' ? 'Escuro' : 'Claro'}`, 'info');
        }
        
        // Teste de Backup
        function testarBackup() {
            mostrarResultado('resultadoBackup', 'ğŸ’¾ Iniciando backup...', 'info');
            setTimeout(() => {
                mostrarResultado('resultadoBackup', 'âœ… Backup realizado com sucesso!', 'success');
            }, 1500);
        }
        
        function verificarPersistencia() {
            const statusEl = document.getElementById('dbStatus');
            const statusTextEl = document.getElementById('dbStatusText');
            
            statusEl.className = 'status-indicator status-online';
            statusTextEl.textContent = 'Online';
            
            mostrarResultado('resultadoBackup', 'âœ… PersistÃªncia verificada - Banco funcionando!', 'success');
        }
        
        function limparCache() {
            mostrarResultado('resultadoBackup', 'ğŸ—‘ï¸ Limpando cache...', 'warning');
            setTimeout(() => {
                mostrarResultado('resultadoBackup', 'âœ… Cache limpo com sucesso!', 'success');
            }, 1000);
        }
        
        // Event listeners
        document.getElementById('logoInput').addEventListener('change', function() {
            if (this.files.length > 0) {
                mostrarResultado('resultadoLogo', `ğŸ“ Arquivo selecionado: ${this.files[0].name}`, 'info');
            }
        });
        
        document.getElementById('dbImport').addEventListener('change', function() {
            if (this.files.length > 0) {
                mostrarResultado('resultadoImport', `ğŸ“ Arquivo selecionado: ${this.files[0].name}`, 'info');
            }
        });
        
        // InicializaÃ§Ã£o
        window.onload = function() {
            verificarPWA();
            verificarPersistencia();
            testarTema();
            atualizarStatusGeral();
            
            // Simular prompt de instalaÃ§Ã£o apÃ³s 3 segundos
            setTimeout(verificarPWA, 3000);
        };
    </script>
</body>
</html>


