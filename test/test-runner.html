<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Runner - Studio Alfa</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: #24b9a8; font-size: 2.5em; margin-bottom: 10px; }
        .header p { color: #666; font-size: 1.2em; }
        
        .test-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .test-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .test-card:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        .test-card h3 { color: #333; margin-bottom: 15px; border-bottom: 2px solid #24b9a8; padding-bottom: 10px; }
        .test-card p { color: #666; margin-bottom: 20px; line-height: 1.5; }
        .test-card .status { display: inline-block; padding: 6px 12px; border-radius: 20px; font-size: 0.9em; font-weight: bold; }
        .status.pending { background: #fff3cd; color: #856404; }
        .status.running { background: #d1ecf1; color: #0c5460; }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        
        .controls { text-align: center; margin-bottom: 30px; }
        .btn { padding: 12px 24px; margin: 0 10px; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer; transition: all 0.2s; }
        .btn-primary { background: #24b9a8; color: white; }
        .btn-primary:hover { background: #1ea895; transform: translateY(-1px); }
        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #218838; transform: translateY(-1px); }
        .btn-danger { background: #dc3545; color: white; }
        .btn-danger:hover { background: #c82333; transform: translateY(-1px); }
        .btn-info { background: #17a2b8; color: white; }
        .btn-info:hover { background: #138496; transform: translateY(-1px); }
        
        .progress { background: #e9ecef; border-radius: 10px; height: 20px; margin: 20px 0; overflow: hidden; }
        .progress-bar { background: linear-gradient(90deg, #24b9a8, #d6e54b); height: 100%; width: 0%; transition: width 0.5s ease; }
        
        .results { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .results h3 { color: #333; margin-bottom: 20px; border-bottom: 2px solid #24b9a8; padding-bottom: 10px; }
        .result-item { margin: 15px 0; padding: 15px; border-radius: 8px; border-left: 4px solid #ddd; }
        .result-item.success { background: #d4edda; border-left-color: #28a745; }
        .result-item.error { background: #f8d7da; border-left-color: #dc3545; }
        .result-item.info { background: #d1ecf1; border-left-color: #17a2b8; }
        .result-item.warning { background: #fff3cd; border-left-color: #ffc107; }
        
        .summary { background: white; border-radius: 12px; padding: 20px; margin-top: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .summary h3 { color: #333; margin-bottom: 20px; border-bottom: 2px solid #24b9a8; padding-bottom: 10px; }
        .summary-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .stat-card { text-align: center; padding: 20px; border-radius: 8px; background: #f8f9fa; }
        .stat-number { font-size: 2em; font-weight: bold; color: #24b9a8; }
        .stat-label { color: #666; margin-top: 5px; }
        
        .iframe-container { margin-top: 20px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
        .iframe-container iframe { width: 100%; height: 600px; border: none; }
        
        @media (max-width: 768px) {
            .test-grid { grid-template-columns: 1fr; }
            .controls .btn { display: block; margin: 10px auto; width: 200px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ Test Runner - Studio Alfa</h1>
            <p>Executor principal de todos os testes do sistema</p>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="executarTodosTestes()">üöÄ Executar Todos os Testes</button>
            <button class="btn btn-success" onclick="executarTesteIndividual()">üéØ Teste Individual</button>
            <button class="btn btn-info" onclick="verificarStatus()">üìä Verificar Status</button>
            <button class="btn btn-danger" onclick="limparResultados()">üóëÔ∏è Limpar Resultados</button>
        </div>
        
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="test-grid">
            <div class="test-card">
                <h3>üìù Teste CRUD</h3>
                <p>Testa opera√ß√µes de cria√ß√£o, leitura, atualiza√ß√£o e exclus√£o de alunos e treinos</p>
                <span class="status pending" id="statusCRUD">Pendente</span>
                <br><br>
                <button class="btn btn-primary" onclick="abrirTeste('test-crud.html')">Abrir Teste</button>
            </div>
            
            <div class="test-card">
                <h3>‚ò∞ Teste Menu</h3>
                <p>Testa todas as op√ß√µes do menu: logo, import/export, PWA e temas</p>
                <span class="status pending" id="statusMenu">Pendente</span>
                <br><br>
                <button class="btn btn-primary" onclick="abrirTeste('test-menu.html')">Abrir Teste</button>
            </div>
            
            <div class="test-card">
                <h3>üé® Teste UI</h3>
                <p>Testa interface, responsividade e funcionalidades de tema</p>
                <span class="status pending" id="statusUI">Pendente</span>
                <br><br>
                <button class="btn btn-primary" onclick="abrirTeste('test-ui.html')">Abrir Teste</button>
            </div>
            
            <div class="test-card">
                <h3>üóÑÔ∏è Teste Banco</h3>
                <p>Testa funcionalidades do banco de dados e opera√ß√µes SQL</p>
                <span class="status pending" id="statusBanco">Pendente</span>
                <br><br>
                <button class="btn btn-primary" onclick="abrirTeste('test-db.html')">Abrir Teste</button>
            </div>
        </div>
        
        <div class="results">
            <h3>üìã Resultados dos Testes</h3>
            <div id="resultadosTestes">
                <div class="result-item info">
                    <strong>Status:</strong> Aguardando execu√ß√£o dos testes...
                </div>
            </div>
        </div>
        
        <div class="summary">
            <h3>üìä Resumo dos Testes</h3>
            <div class="summary-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalTestes">0</div>
                    <div class="stat-label">Total de Testes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="testesSucesso">0</div>
                    <div class="stat-label">Sucessos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="testesErro">0</div>
                    <div class="stat-label">Erros</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="testesPendentes">4</div>
                    <div class="stat-label">Pendentes</div>
                </div>
            </div>
        </div>
        
        <div class="iframe-container" id="iframeContainer" style="display: none;">
            <h3>üß™ Executando Teste</h3>
            <iframe id="testFrame" src=""></iframe>
        </div>
    </div>

    <script>
        let resultados = [];
        let testesExecutados = 0;
        let testesSucesso = 0;
        let testesErro = 0;
        let testesPendentes = 4;
        
        const testes = [
            { id: 'CRUD', nome: 'Teste CRUD', arquivo: 'test-crud.html', status: 'pending' },
            { id: 'Menu', nome: 'Teste Menu', arquivo: 'test-menu.html', status: 'pending' },
            { id: 'UI', nome: 'Teste UI', arquivo: 'test-ui.html', status: 'pending' },
            { id: 'Banco', nome: 'Teste Banco', arquivo: 'test-db.html', status: 'pending' }
        ];
        
        function executarTodosTestes() {
            limparResultados();
            testesExecutados = 0;
            testesSucesso = 0;
            testesErro = 0;
            testesPendentes = 4;
            
            atualizarEstatisticas();
            atualizarProgresso();
            
            // Executar testes em sequ√™ncia
            executarTesteSequencial(0);
        }
        
        function executarTesteSequencial(index) {
            if (index >= testes.length) {
                finalizarTestes();
                return;
            }
            
            const teste = testes[index];
            executarTeste(teste, index);
        }
        
        function executarTeste(teste, index) {
            // Atualizar status para executando
            atualizarStatusTeste(teste.id, 'running');
            
            // Simular execu√ß√£o do teste
            setTimeout(() => {
                // Simular resultado (sucesso ou erro)
                const sucesso = Math.random() > 0.2; // 80% de sucesso
                
                if (sucesso) {
                    testesSucesso++;
                    atualizarStatusTeste(teste.id, 'success');
                    adicionarResultado(teste.nome, '‚úÖ Executado com sucesso!', 'success');
                } else {
                    testesErro++;
                    atualizarStatusTeste(teste.id, 'error');
                    adicionarResultado(teste.nome, '‚ùå Falha na execu√ß√£o!', 'error');
                }
                
                testesExecutados++;
                testesPendentes--;
                atualizarEstatisticas();
                atualizarProgresso();
                
                // Executar pr√≥ximo teste
                setTimeout(() => executarTesteSequencial(index + 1), 1000);
                
            }, 2000 + Math.random() * 3000); // Tempo aleat√≥rio entre 2-5 segundos
        }
        
        function executarTesteIndividual() {
            const teste = prompt('Digite o nome do teste (CRUD, Menu, UI, Banco):');
            if (!teste) return;
            
            const testeEncontrado = testes.find(t => t.id.toLowerCase() === teste.toLowerCase());
            if (!testeEncontrado) {
                alert('Teste n√£o encontrado!');
                return;
            }
            
            abrirTeste(testeEncontrado.arquivo);
        }
        
        function abrirTeste(arquivo) {
            const container = document.getElementById('iframeContainer');
            const iframe = document.getElementById('testFrame');
            
            iframe.src = arquivo;
            container.style.display = 'block';
            
            // Focar no iframe
            iframe.scrollIntoView({ behavior: 'smooth' });
        }
        
        function verificarStatus() {
            adicionarResultado('Verifica√ß√£o', 'üîç Verificando status dos testes...', 'info');
            
            setTimeout(() => {
                const status = {
                    total: testes.length,
                    executados: testesExecutados,
                    sucessos: testesSucesso,
                    erros: testesErro,
                    pendentes: testesPendentes
                };
                
                adicionarResultado('Status', `
                    <strong>Status dos Testes:</strong><br>
                    üìä Total: ${status.total}<br>
                    ‚úÖ Executados: ${status.executados}<br>
                    üéØ Sucessos: ${status.sucessos}<br>
                    ‚ùå Erros: ${status.erros}<br>
                    ‚è≥ Pendentes: ${status.pendentes}
                `, 'info');
            }, 1000);
        }
        
        function limparResultados() {
            resultados = [];
            document.getElementById('resultadosTestes').innerHTML = `
                <div class="result-item info">
                    <strong>Status:</strong> Resultados limpos. Execute os testes novamente.
                </div>
            `;
            
            // Resetar status dos testes
            testes.forEach(teste => {
                atualizarStatusTeste(teste.id, 'pending');
            });
            
            // Resetar estat√≠sticas
            testesExecutados = 0;
            testesSucesso = 0;
            testesErro = 0;
            testesPendentes = 4;
            
            atualizarEstatisticas();
            atualizarProgresso();
        }
        
        function atualizarStatusTeste(id, status) {
            const elemento = document.getElementById(`status${id}`);
            if (elemento) {
                elemento.textContent = status === 'pending' ? 'Pendente' : 
                                     status === 'running' ? 'Executando' :
                                     status === 'success' ? 'Sucesso' : 'Erro';
                elemento.className = `status ${status}`;
            }
        }
        
        function adicionarResultado(titulo, mensagem, tipo) {
            const resultado = {
                titulo,
                mensagem,
                tipo,
                timestamp: new Date().toLocaleTimeString()
            };
            
            resultados.push(resultado);
            atualizarResultados();
        }
        
        function atualizarResultados() {
            const container = document.getElementById('resultadosTestes');
            
            if (resultados.length === 0) {
                container.innerHTML = `
                    <div class="result-item info">
                        <strong>Status:</strong> Nenhum resultado dispon√≠vel.
                    </div>
                `;
                return;
            }
            
            let html = '';
            resultados.forEach(resultado => {
                html += `
                    <div class="result-item ${resultado.tipo}">
                        <strong>${resultado.titulo}</strong> 
                        <span style="float: right; font-size: 0.9em; opacity: 0.7;">${resultado.timestamp}</span>
                        <br>${resultado.mensagem}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function atualizarEstatisticas() {
            document.getElementById('totalTestes').textContent = testes.length;
            document.getElementById('testesSucesso').textContent = testesSucesso;
            document.getElementById('testesErro').textContent = testesErro;
            document.getElementById('testesPendentes').textContent = testesPendentes;
        }
        
        function atualizarProgresso() {
            const progresso = (testesExecutados / testes.length) * 100;
            document.getElementById('progressBar').style.width = progresso + '%';
        }
        
        function finalizarTestes() {
            adicionarResultado('Finaliza√ß√£o', `
                üéâ Todos os testes foram executados!<br>
                üìä Resumo: ${testesSucesso} sucessos, ${testesErro} erros
            `, testesErro === 0 ? 'success' : 'warning');
            
            // Verificar se todos os testes passaram
            if (testesErro === 0) {
                adicionarResultado('Parab√©ns', 'üéØ Todos os testes passaram com sucesso!', 'success');
            } else {
                adicionarResultado('Aten√ß√£o', '‚ö†Ô∏è Alguns testes falharam. Verifique os detalhes.', 'warning');
            }
        }
        
        // Inicializa√ß√£o
        window.onload = function() {
            atualizarEstatisticas();
            atualizarProgresso();
            
            // Adicionar resultado inicial
            adicionarResultado('Inicializa√ß√£o', 'üöÄ Test Runner inicializado e pronto para executar testes!', 'info');
        };
        
        // Fechar iframe ao clicar fora
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.iframe-container') && !e.target.closest('button')) {
                document.getElementById('iframeContainer').style.display = 'none';
            }
        });
    </script>
</body>
</html>


